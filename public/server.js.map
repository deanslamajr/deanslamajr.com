{"version":3,"sources":["webpack:///webpack/bootstrap 5b482a82a0fc758caddf","webpack:///external \"react\"","webpack:///external \"styled-components\"","webpack:///./config/constants.js","webpack:///./src/client/style/style-utils.js","webpack:///external \"axios\"","webpack:///external \"react-redux\"","webpack:///./src/client/components/Error/index.js","webpack:///./src/client/components/Header/index.js","webpack:///./src/client/components/Loader/index.js","webpack:///./src/server/models/db.js","webpack:///external \"react-helmet\"","webpack:///./src/client/components/Card/index.js","webpack:///./src/server/models/utils.js","webpack:///external \"express\"","webpack:///./src/client/components/helpers.js","webpack:///./src/client/data/about/actions.js","webpack:///./src/client/data/about/constants.js","webpack:///./src/client/data/posts/actions.js","webpack:///./src/client/data/posts/constants.js","webpack:///./src/client/data/projects/actions.js","webpack:///./src/client/data/projects/constants.js","webpack:///./src/client/data/readings/actions.js","webpack:///./src/client/data/readings/constants.js","webpack:///./src/server/models/about.js","webpack:///./src/server/models/jwt.js","webpack:///./src/server/models/posts.js","webpack:///./src/server/models/projects.js","webpack:///./src/server/models/readings.js","webpack:///external \"jsonwebtoken\"","webpack:///external \"react-router\"","webpack:///external \"redux\"","webpack:///./src/server/index.js","webpack:///external \"babel-polyfill\"","webpack:///./src/client/components/About/About.js","webpack:///./src/client/components/About/AboutContainer.js","webpack:///./src/client/components/About/Edit/index.js","webpack:///./src/client/components/About/index.js","webpack:///./src/client/components/Layout/Navbar/Hamburger/index.js","webpack:///./src/client/components/Layout/Navbar/index.js","webpack:///./src/client/components/Layout/Navbar/navbar.js","webpack:///./src/client/components/Layout/index.js","webpack:///./src/client/components/Login/index.js","webpack:///./src/client/components/Posts/Post.js","webpack:///./src/client/components/Posts/PostList.js","webpack:///./src/client/components/Posts/index.js","webpack:///./src/client/components/Projects/Project.js","webpack:///./src/client/components/Projects/ProjectsContainer.js","webpack:///./src/client/components/Projects/ProjectsList.js","webpack:///./src/client/components/Projects/index.js","webpack:///./src/client/components/Readings/Add/Add.js","webpack:///./src/client/components/Readings/Add/index.js","webpack:///./src/client/components/Readings/Reading.js","webpack:///./src/client/components/Readings/ReadingsContainer.js","webpack:///./src/client/components/Readings/ReadingsList.js","webpack:///./src/client/components/Readings/index.js","webpack:///./src/client/components/routes.js","webpack:///./src/client/data/about/reducers.js","webpack:///./src/client/data/posts/reducers.js","webpack:///./src/client/data/projects/reducers.js","webpack:///./src/client/data/readings/reducers.js","webpack:///./src/client/data/reducers.js","webpack:///./src/client/data/store.js","webpack:///./src/server/api.js","webpack:///./src/server/controllers/about.js","webpack:///./src/server/controllers/login.js","webpack:///./src/server/controllers/logout.js","webpack:///./src/server/controllers/posts.js","webpack:///./src/server/controllers/projects.js","webpack:///./src/server/controllers/readings.js","webpack:///./src/server/controllers/render-component.js","webpack:///./src/server/controllers/status.js","webpack:///./src/server/helpers/metrics.js","webpack:///./src/server/helpers/sentry.js","webpack:///./src/server/models/user.js","webpack:///./src/server/routes.js","webpack:///external \"aws-dynamodb\"","webpack:///external \"bcrypt\"","webpack:///external \"body-parser\"","webpack:///external \"cookie-parser\"","webpack:///external \"helmet\"","webpack:///external \"lynx\"","webpack:///external \"nconf\"","webpack:///external \"raven\"","webpack:///external \"react-dom/server\"","webpack:///external \"redux-promise-middleware\"","webpack:///external \"uuid/v4\""],"names":["config","nconf","argv","env","file","__dirname","card","shadow","media","tabletMax","css","phoneMax","Container","styled","div","Error","Header","summary","Loader","dynamoDB","accessKeyId","constants","get","secretAccessKey","region","OuterContainer","CardLink","a","ShadowCard","Title","Details","Quote","verifyResponse","res","Array","isArray","length","formatDate","date","monthNames","day","getDate","monthIndex","getMonth","year","getFullYear","formattedDate","fetchAbout","type","ABOUT_FETCH","payload","axios","addAbout","data","ABOUT_ADD","ABOUT_FETCH_PENDING","ABOUT_FETCH_FULFILLED","ABOUT_FETCH_REJECTED","addPosts","posts","POSTS_ADD","fetchPosts","POSTS_FETCH","POSTS_FETCH_PENDING","POSTS_FETCH_FULFILLED","POSTS_FETCH_REJECTED","addProjects","projects","PROJECTS_ADD","fetchProjects","PROJECTS_FETCH","PROJECTS_FETCH_PENDING","PROJECTS_FETCH_FULFILLED","PROJECTS_FETCH_REJECTED","addReadings","readings","READINGS_ADD","fetchReadings","READINGS_FETCH","READINGS_FETCH_PENDING","READINGS_FETCH_FULFILLED","READINGS_FETCH_REJECTED","reverseSortResponseByVersion","sort","b","version","Number","isInteger","db","table","scan","then","ACCESSTOKENCOOKIE","SECRET","verify","req","Promise","resolve","reject","jWT","cookies","jwt","err","headers","cleanedData","substring","jsonifiedData","JSON","parse","postsObject","references","Post","Object","keys","map","key","add","insert","app","use","set","process","PORT","express","static","bodyParser","json","router","listen","console","log","LogoContainer","BackgroundImage","props","imageUrl","renderLogo","LinksContainer","LinkItem","li","Link","renderLinks","linksArray","name","url","BioCard","renderBio","bio","__html","AboutContainer","About","isLoading","error","content","title","pictureURL","links","React","Component","mapStateToProps","state","about","isFetched","Edit","AboutParentContainer","editAboutComponent","children","Line","span","expanded","Hamburger","onMenuClick","NavBarContainer","_onMenuClick","bind","_onLinkClick","setState","item","path","toLowerCase","activeItem","history","push","currentPath","menuItems","split","MiddleContainer","InnerContainer","MenuItem","isActive","NavBar","onLinkClick","Footer","Layout","pathname","location","SUCCESS","FAILURE","LOGGEDOUT","AUTHENTICATED","NOTAUTHENTICATED","Form","form","CenteredBase","CenteredText","AuthText","Login","username","password","loginResult","authenticated","handleSubmit","checkAuthentication","logout","event","target","value","preventDefault","post","catch","authState","renderAuthenticationCheckDiv","handleChange","renderLoginResultDiv","mediumUser","postURL","uniqueSlug","Date","firstPublishedAt","publishDate","previewContent","bodyModel","paragraphs","text","PostList","postData","id","ProjectLink","SourceLink","Description","Project","cardData","source","description","ProjectsList","sortedData","order","projectsData","ProjectsParentContainer","editProjectsComponent","Input","input","placeholder","ServerResponse","Add","serverResult","submitHandler","changeHandler","author","quote","publication","e","message","AddContainer","defaultServerState","defaultFormState","defaultState","assign","_onSubmit","_onChange","forEach","valueOf","readingData","element","Reading","ReadingsList","Readings","foundDate","ReadingsParentContainer","addReadingsComponent","Routes","reducers","response","actionReducer","initialState","root","Router","getProjects","getPosts","getAbout","getReadings","addReading","status","sendStatus","authenticateUser","INVALID_CREDS","verifyPassword","bcrypt","compare","body","result","createJWT","accessToken","sign","exp","Math","floor","now","cookie","expires","httpOnly","startTime","responseCode","clearCookie","Raven","captureException","getTime","fetchDataByPath","store","originalUrl","dispatch","redirect","search","matchRoutes","renderComponent","context","stringify","getState","sheet","ServerStyleSheet","markup","collectStyles","styleTags","getStyleTags","render","send","isAuthenticated","settings","host","port","client","Lynx","prefix","sanitizeName","tokens","shift","join","createRequestNamespace","method","urlTokens","resourceName","replace","sanitizedResourceName","increment","time","duration","timing","sendTimeMetric","namespace","sendFinishedRequest","includes","statusCode","sendRequestClosed","middleware","next","once","module","exports","install","getHashedPassword","where","eq","api"],"mappings":"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","file":"server.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/public/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 86);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5b482a82a0fc758caddf","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"styled-components\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"styled-components\"\n// module id = 1\n// module chunks = 0","/**\n * Sets up environment-specific configuration\n * @module config\n * @requires nconf\n */\n\nimport nconf from 'nconf'\n\nconst config = nconf\n  .argv()\n  .env('__') // custom delimiter for nested properties\n  .file(`${__dirname}/../config/constants.json`)\n\nexport default config\n\n\n\n// WEBPACK FOOTER //\n// ./config/constants.js","import styled, { css } from 'styled-components'\n\nexport const media = {\n  tabletMax: (...args) => css`\n    @media (max-width: 899px) {\n      ${ css(...args) }\n    }\n  `,\n  phoneMax: (...args) => css`\n    @media (max-width: 599px) {\n      ${ css(...args) }\n    }\n  `\n}\n\nexport function card () {\n  return css`\n    background-color: white;\n    padding: 1.25rem;\n    border-radius: 2px;\n    font-size: 1.3rem;\n    margin: auto 1.5rem;\n    \n    ${media.phoneMax`\n      padding: .5rem;\n      margin: 0;\n      font-size: 1.2rem;\n    `}\n  `\n}\n\nexport function shadow () {\n  return css`\n    box-shadow: 0 2px 2px 0 rgba(0,0,0,0.16);\n  `\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/style/style-utils.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"react-redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-redux\"\n// module id = 5\n// module chunks = 0","import React from 'react'\nimport styled from 'styled-components'\nimport { media } from '../../style/style-utils'\n\nconst Container = styled.div`\n  margin: 5rem;\n  text-align: center;\n  font-size: 2rem;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  ${ media.phoneMax`\n    margin: 5rem 2rem;\n  ` }\n`\n\nfunction Error () {\n  return (\n    <Container>\n      <div styleName='message'>500 error, our apologies.</div>\n      <div styleName='message'>This error is the engineer's fault.</div>\n    </Container>\n  )\n}\n\nexport default Error\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Error/index.js","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  margin: 3rem 2rem 2rem;\n  font-size: 1.1rem;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  text-align: center;\n`\n\nfunction Header ({ summary }) {\n  return (\n    <Container>\n      { summary }\n    </Container>\n  )\n}\n\nexport default Header\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Header/index.js","import React from 'react'\nimport styled from 'styled-components'\n\nconst Container = styled.div`\n  width: 50px;\n  margin: 7rem auto 0;\n`\n\nfunction Loader () {\n  return (\n    <Container>\n      <svg version='1.1' id='loader-1' xmlns='http://www.w3.org/2000/svg' x='0px' y='0px'\n        width='50px' height='50px' viewBox='0 0 50 50'>\n        <path fill='#004741' d='M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z'>\n          <animateTransform attributeType='xml'\n            attributeName='transform'\n            type='rotate'\n            from='0 25 25'\n            to='360 25 25'\n            dur='0.6s'\n            repeatCount='indefinite' />\n        </path>\n      </svg>\n    </Container>\n  )\n}\n\nexport default Loader\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Loader/index.js","import awsDynamoDB from 'aws-dynamodb'\n\nimport constants from '../../../config/constants'\n\nconst dynamoDB = awsDynamoDB({\n  accessKeyId: constants.get('DB_ACCESS_KEY_ID'),\n  secretAccessKey: constants.get('DB_SECRET_ACCESS_KEY'),\n  region: constants.get('DB_REGION')\n})\n\nexport default dynamoDB\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/db.js","module.exports = require(\"react-helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-helmet\"\n// module id = 10\n// module chunks = 0","import styled from 'styled-components'\n\nimport { media, card, cardLink, shadow } from '../../style/style-utils'\n\nconst OuterContainer = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 3rem 0;\n\n  ${media.tabletMax`\n    margin: 3rem .75rem;\n  `}\n`\n\nconst CardLink = styled.a`\n  color: inherit;\n  text-decoration: none;\n\n  ${media.phoneMax`\n    margin: 0;\n  `}\n`\n\nconst ShadowCard = styled.div`\n  ${card()}\n  ${shadow()}\n`\n\nconst Title = styled.div`\n  text-align: center;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  font-size: 1.75rem;\n\n  ${media.phoneMax`\n    font-size: 1.5rem;\n  `}\n`\n\nconst Details = styled.div`\n  color: #b21a27;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  margin: 1rem 0;\n\n  ${media.phoneMax`\n    margin: .75rem 0;\n  `}\n`\n\nconst Quote = styled.div`\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  overflow-wrap: break-word;\n  word-wrap: break-word;\n  word-break: break-all;\n  word-break: break-word;\n\n  ${media.phoneMax`\n    text-align: justify;\n  `}\n`\n\nexport {\n    CardLink,\n    ShadowCard,\n    Title,\n    Details,\n    Quote,\n    OuterContainer\n}\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Card/index.js","export function verifyResponse (res) {\n  if (!Array.isArray(res)) {\n    throw new Error('DB response was not the expected type: Array')\n  }\n  if (!res.length) {\n    throw new Error('DB returned an empty array.')\n  }\n  return res\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/utils.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 13\n// module chunks = 0","export function formatDate (date) {\n  const monthNames = [\n    'January', 'February', 'March',\n    'April', 'May', 'June', 'July',\n    'August', 'September', 'October',\n    'November', 'December'\n  ]\n\n  const day = date.getDate()\n  const monthIndex = date.getMonth()\n  const year = date.getFullYear()\n\n  const formattedDate = `${day} ${monthNames[monthIndex]} ${year}`\n\n  return formattedDate\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/helpers.js","import axios from 'axios'\n\nimport { ABOUT_FETCH, ABOUT_ADD } from './constants'\n\nexport const fetchAbout = () => ({\n  type: ABOUT_FETCH,\n  payload: axios.get('/api/about')\n})\n\nexport const addAbout = (data) => ({\n  type: ABOUT_ADD,\n  payload: data\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/about/actions.js","export const ABOUT_FETCH = 'ABOUT_FETCH'\nexport const ABOUT_ADD = 'ABOUT_ADD'\n\nexport const ABOUT_FETCH_PENDING = 'ABOUT_FETCH_PENDING'\nexport const ABOUT_FETCH_FULFILLED = 'ABOUT_FETCH_FULFILLED'\nexport const ABOUT_FETCH_REJECTED = 'ABOUT_FETCH_REJECTED'\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/about/constants.js","import axios from 'axios'\n\nimport { POSTS_FETCH, POSTS_ADD } from './constants'\n\nexport const addPosts = (posts) => ({\n  type: POSTS_ADD,\n  payload: posts\n})\n\nexport const fetchPosts = () => ({\n  type: POSTS_FETCH,\n  payload: axios.get('/api/posts')\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/posts/actions.js","export const POSTS_FETCH = 'POSTS_FETCH'\n\nexport const POSTS_ADD = 'POSTS_ADD'\n\nexport const POSTS_FETCH_PENDING = 'POSTS_FETCH_PENDING'\nexport const POSTS_FETCH_FULFILLED = 'POSTS_FETCH_FULFILLED'\nexport const POSTS_FETCH_REJECTED = 'POSTS_FETCH_REJECTED'\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/posts/constants.js","import axios from 'axios'\n\nimport { PROJECTS_FETCH, PROJECTS_ADD } from './constants'\n\nexport const addProjects = (projects) => ({\n  type: PROJECTS_ADD,\n  payload: projects\n})\n\nexport const fetchProjects = () => ({\n  type: PROJECTS_FETCH,\n  payload: axios.get('/api/projects')\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/projects/actions.js","export const PROJECTS_FETCH = 'PROJECTS_FETCH'\n\nexport const PROJECTS_FETCH_PENDING = 'PROJECTS_FETCH_PENDING'\nexport const PROJECTS_FETCH_FULFILLED = 'PROJECTS_FETCH_FULFILLED'\nexport const PROJECTS_FETCH_REJECTED = 'PROJECTS_FETCH_REJECTED'\n\nexport const PROJECTS_ADD = 'PROJECTS_ADD'\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/projects/constants.js","import axios from 'axios'\n\nimport { READINGS_ADD, READINGS_FETCH } from './constants'\n\nexport const addReadings = (readings) => ({\n  type: READINGS_ADD,\n  payload: readings\n})\n\nexport const fetchReadings = () => ({\n  type: READINGS_FETCH,\n  payload: axios.get('/api/readings')\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/readings/actions.js","export const READINGS_FETCH = 'READINGS_FETCH'\n\nexport const READINGS_ADD = 'READINGS_ADD'\n\nexport const READINGS_FETCH_PENDING = 'READINGS_FETCH_PENDING'\nexport const READINGS_FETCH_FULFILLED = 'READINGS_FETCH_FULFILLED'\nexport const READINGS_FETCH_REJECTED = 'READINGS_FETCH_REJECTED'\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/readings/constants.js","import db from './db'\nimport { verifyResponse } from './utils'\nimport constants from '../../../config/constants'\n\nfunction reverseSortResponseByVersion (res) {\n  return res.sort((a, b) => {\n    // if either item does not have a valid version property, sort that item as less important\n    if (!a.version || !Number.isInteger(a.version)) {\n      return 1\n    }\n    if (!b.version || !Number.isInteger(b.version)) {\n      return -1\n    }\n    return b.version - a.version\n  })\n}\n\nexport const get = () => {\n  return db\n    .table(constants.get('DB_TABLE_ABOUT'))\n    .scan()\n    .then(res => {\n      verifyResponse(res)\n      // return the most recent version\n      return reverseSortResponseByVersion(res)[0]\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/about.js","import jwt from 'jsonwebtoken'\n\nimport constants from '../../../config/constants'\n\nconst ACCESSTOKENCOOKIE = constants.get('accessTokenCookie')\nconst SECRET = constants.get('secret')\n\nexport const verify = (req) => {\n  return new Promise((resolve, reject) => {\n    const jWT = req.cookies[ACCESSTOKENCOOKIE]\n\n    if (!jWT) {\n      reject(new Error('JWT is invalid!'))\n    } else {\n      try {\n        jwt.verify(jWT, SECRET)\n        resolve()\n      } catch (err) {\n        reject(err)\n      }\n    }\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/jwt.js","import axios from 'axios'\n\nimport constants from '../../../config/constants'\n\nexport const get = () => {\n  const headers = { 'Accept': 'application/json' }\n\n  return axios.get(`https://medium.com/${constants.get('MEDIUM_USERNAME')}/latest`, { headers })\n    .then(({ data }) => {\n      // the first 16 characters of the response are unnusable giberish\n      const cleanedData = data.substring(16)\n\n      const jsonifiedData = JSON.parse(cleanedData)\n      const postsObject = jsonifiedData.payload.references.Post\n\n      return Object.keys(postsObject)\n        .map(key => postsObject[key])\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/posts.js","import db from './db'\nimport { verifyResponse } from './utils'\nimport constants from '../../../config/constants'\n\nexport const get = () => {\n  return db\n    .table(constants.get('DB_TABLE_PROJECTS'))\n    .scan()\n    .then(verifyResponse)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/projects.js","import db from './db'\nimport { verifyResponse } from './utils'\nimport constants from '../../../config/constants'\n\nexport const add = (data) => {\n  return db\n    .table(constants.get('DB_TABLE_READINGS'))\n    .insert(data)\n}\n\nexport const get = () => {\n  return db\n    .table(constants.get('DB_TABLE_READINGS'))\n    .scan()\n    .then(verifyResponse)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/readings.js","module.exports = require(\"jsonwebtoken\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jsonwebtoken\"\n// module id = 28\n// module chunks = 0","module.exports = require(\"react-router\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-router\"\n// module id = 29\n// module chunks = 0","module.exports = require(\"redux\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux\"\n// module id = 30\n// module chunks = 0","import express from 'express'\n\nimport bodyParser from 'body-parser'\nimport cookieParser from 'cookie-parser'\nimport helmet from 'helmet'\n\nimport router from './routes'\n\nconst app = express()\n\n// helps secure Express with various HTTP headers\napp.use(helmet())\n\napp.use(cookieParser())\n\napp.set('view engine', 'ejs')\napp.set('views', __dirname)\n\napp.set('port', (process.env.PORT || 1986))\n\napp.use(express.static(__dirname))\n\napp.use(bodyParser.json())\n\n// define routes\napp.use(router)\n\n// start the server\napp.listen(app.get('port'), function () {\n  console.log('ready on port ' + app.get('port'))\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/index.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 32\n// module chunks = 0","import React from 'react'\nimport styled from 'styled-components'\nimport { media, shadow, card } from '../../style/style-utils'\nimport Helmet from 'react-helmet'\n\nimport Header from '../Header'\nimport Loader from '../Loader'\nimport ErrorComponent from '../Error'\n\nconst LogoContainer = styled.div`\n  ${shadow()}\n\n  height: 15rem;\n  margin: 0 1.5rem;\n\n  ${media.tabletMax`\n    height: 14rem;\n  `}\n\n  ${media.phoneMax`\n    margin: 0 .75rem;\n  `}\n`\n\nconst BackgroundImage = styled.div`\n  background-image: url(\"${props => props.imageUrl}\"), url(\"${props => props.imageUrl}\");\n  background-repeat: no-repeat,no-repeat;\n  background-color: #e7eeed;\n  background-blend-mode: color-burn, color-burn;\n  height: 100%;\n  width: 100%;\n  background-position-x: 24rem, -3rem;\n  background-position-y: -20rem, -5rem;\n  background-size: 70rem, 30rem;\n\n  ${media.tabletMax`\n    background-position-x: 16rem, -3rem;\n    background-position-y: -11rem, 0rem;\n    background-size: 45rem, 22rem;\n  `}\n\n  ${media.phoneMax`\n    background-blend-mode: color-burn, lighten;\n    background-position-x: 0rem;\n    background-position-y: 50%;\n    background-size: 125%;\n  `}\n`\n\nfunction renderLogo (imageUrl) {\n  return (\n    <LogoContainer>\n      <BackgroundImage imageUrl={imageUrl} />\n    </LogoContainer>\n  )\n}\n\nconst LinksContainer = styled.div`\n  font-size: 1.25rem;\n  text-align: center;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n\n  ${media.tabletMax`\n    margin-top: 2rem;\n  `}\n\n  ${media.phoneMax`\n    justify-content: space-around;\n  `}\n`\n\nconst LinkItem = styled.li`\n  display: inline;\n  margin: 2rem;\n\n  ${media.tabletMax`\n    margin: 0 1.5rem;\n  `}\n\n  ${media.phoneMax`\n    margin: .5rem;\n  `}\n`\n\nconst Link = styled.a`\n  color: black;\n\n  :link {\n    color: black;\n  }\n\n  :visited {\n    color: black;\n  }\n`\n\nfunction renderLinks (linksArray) {\n  return (\n    <LinksContainer>\n      {\n        linksArray.map(({ name, url }) => (\n          <LinkItem key={name}>\n            <Link href={url} target='_blank'>{name}</Link>\n          </LinkItem>\n        ))\n      }\n    </LinksContainer>\n  )\n}\n\nconst BioCard = styled.div`\n  ${shadow()}\n  ${card()}\n\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  text-align: justify;\n  font-size: 1.15rem;\n\n  ${media.tabletMax`\n    margin: 2rem 1.5rem;\n  `}\n\n  ${media.phoneMax`\n    margin: 2rem .75rem;\n  `}\n`\n\nfunction renderBio (bio) {\n  return <BioCard dangerouslySetInnerHTML={{__html: bio}} />\n}\n\nconst AboutContainer = styled.div`\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n`\n\nclass About extends React.Component {\n  componentDidMount () {\n    if (!this.props.data) {\n      this.props.fetchAbout()\n    }\n  }\n\n  render () {\n    const { data, isLoading, error } = this.props\n    let content\n\n    if (data) {\n      content = (\n        <AboutContainer>\n          { data.title ? <Header summary={data.title} /> : null }\n          { data.pictureURL ? renderLogo(data.pictureURL) : null }\n          { data.links ? renderLinks(data.links) : null }\n          { data.bio ? renderBio(data.bio) : null }\n        </AboutContainer>\n      )\n    } else if (isLoading) {\n      content = <Loader />\n    } else if (error) {\n      // @todo reroute to 5xx view\n      content = <ErrorComponent />\n    } else {\n      content = null\n    }\n\n    return (\n      <div>\n        <Helmet>\n          <title>dslama.net - about</title>\n        </Helmet>\n        {content}\n      </div>\n    )\n  }\n}\n\nexport default About\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/About/About.js","import { connect } from 'react-redux'\n\nimport { fetchAbout } from '../../data/about/actions'\nimport About from './About'\n\nfunction mapStateToProps (state) {\n  if (state.about.isLoading) {\n    return {\n      isLoading: true\n    }\n  } else if (state.about.error) {\n    // @todo log error\n    return {\n      error: true\n    }\n  } else if (state.about.isFetched) {\n    return {\n      data: state.about.data\n    }\n  } else {\n    return {}\n  }\n}\n\nexport default connect(mapStateToProps, { fetchAbout })(About)\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/About/AboutContainer.js","import React from 'react'\n\nexport default class Edit extends React.Component {\n  render () {\n    return (\n      <div>\n        Editing the about page!!\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/About/Edit/index.js","import React from 'react'\n\nimport AboutContainer from './AboutContainer'\n\nexport default class AboutParentContainer extends React.Component {\n  render () {\n    const { children: editAboutComponent } = this.props\n\n    return editAboutComponent || <AboutContainer />\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/About/index.js","import React from 'react'\nimport styled from 'styled-components'\n\nimport { media } from '../../../../style/style-utils'\n\nconst OuterContainer = styled.div`\n  display: none;\n  :hover{\n    cursor: pointer;\n  }\n\n  ${media.phoneMax`\n    display: inline;\n    padding-top: .2rem;\n    padding-right: .3rem;\n  `}\n`\n\nconst Line = styled.span`\n  width: 35px;\n  height: 3px;\n  background-color: #ecf0f1;\n  display: block;\n  margin: 0 auto 7px;\n  transition: all 0.3s ease-in-out;\n\n  :nth-child(2){\n    opacity: ${props => props.expanded ? 0 : 'inherit'};\n  }\n  :nth-child(1){\n    transform: ${props => props.expanded ? 'translateY(10px) rotate(45deg)' : 'inherit'};\n  }\n  :nth-child(3){\n    transform: ${props => props.expanded ? 'translateY(-10px) rotate(-45deg)' : 'inherit'};\n  }\n`\n\nclass Hamburger extends React.Component {\n  render () {\n    const { onMenuClick, expanded } = this.props\n\n    return (\n      <OuterContainer onClick={onMenuClick}>\n        <Line expanded={expanded} />\n        <Line expanded={expanded} />\n        <Line expanded={expanded} />\n      </OuterContainer>\n    )\n  }\n}\n\nexport default Hamburger\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Layout/Navbar/Hamburger/index.js","import React from 'react'\n\nimport Navbar from './navbar'\n\nexport default class NavBarContainer extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this._onMenuClick = this._onMenuClick.bind(this)\n    this._onLinkClick = this._onLinkClick.bind(this)\n\n    this.state = {\n      expanded: false\n    }\n  }\n\n  _onMenuClick () {\n    this.setState({ expanded: !this.state.expanded })\n  }\n\n  _onLinkClick (item) {\n    const path = item.toLowerCase()\n\n    this.setState({\n      expanded: false,\n      activeItem: path\n    })\n\n    this.props.history.push(`/${path}`)\n  }\n\n  componentWillMount () {\n    // set the activeItem i.e. active view\n    const { currentPath, menuItems } = this.props\n\n    let activeItem = currentPath.split('/')[1]\n\n    activeItem = activeItem\n      ? activeItem.toLowerCase()\n      : menuItems[0].toLowerCase()\n\n    this.setState({ activeItem })\n  }\n\n  render () {\n    const { title, menuItems } = this.props\n    return (\n      <Navbar\n        title={title}\n        activeItem={this.state.activeItem}\n        expanded={this.state.expanded}\n        onMenuClick={this._onMenuClick}\n        onLinkClick={this._onLinkClick}\n        menuItems={menuItems}\n      />\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Layout/Navbar/index.js","import React from 'react'\nimport styled from 'styled-components'\n\nimport { media, shadow } from '../../../style/style-utils'\n\nimport Hamburger from './Hamburger'\n\nconst OuterContainer = styled.div`\n  ${shadow()}\n\n  margin-top: 1rem;\n  display: flex;\n  justify-content: space-between;\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  background-color: #004741;\n  color: white;\n  border-radius: 2px;\n\n  ${media.tabletMax`\n    margin-top: 0;\n    border-radius: 0;\n  `}\n\n  ${media.phoneMax`\n    margin-top: 0;\n    flex-direction: column;\n    padding: .5rem .2rem 0;\n  `}\n`\n\nconst MiddleContainer = styled.span`\n  display: flex;\n  font-size: 2rem;\n  justify-content: space-between;\n  padding: .4rem .2rem 0;\n  cursor: default;\n\n  ${media.phoneMax`\n    padding: 0;\n  `}\n`\n\nconst InnerContainer = styled.span`\n  display: flex;\n  justify-content: flex-end;\n  padding-right: .55rem;\n\n  ${media.tabletMax`\n    margin-left: 1rem;\n  `}\n\n  ${media.phoneMax`\n    display: ${props => props.expanded ? 'inline' : 'none' };\n    flex-direction: column;\n  `}\n`\n\nconst MenuItem = styled.span`\n  margin-left: 2rem;\n  padding: .45rem .2rem .1rem;\n  color: white;\n  cursor: pointer;\n  font-size: 1.5rem;\n\n  text-decoration: ${props => props.isActive ? 'underline' : 'inherit'};\n\n  ${media.tabletMax`\n    margin-left: .8rem;\n  `}\n\n  ${media.phoneMax`\n    display: block;\n    text-align: right;\n    padding-right: 1.25rem;\n    font-size: 1.75rem;\n    border-top: 1px solid #002e2a;\n    margin: 0;\n  `}\n`\n\nclass NavBar extends React.Component {\n  render () {\n    const {\n      activeItem,\n      title,\n      menuItems,\n      expanded,\n      onLinkClick,\n      onMenuClick\n    } = this.props\n\n    return (\n      <OuterContainer>\n        <MiddleContainer>\n          <span>{title}</span>\n          <Hamburger onMenuClick={onMenuClick} expanded={expanded} />\n        </MiddleContainer>\n        <InnerContainer expanded={expanded}>\n          {menuItems.map(item => (\n            <MenuItem\n              key={item}\n              onClick={() => onLinkClick(item)}\n              isActive={activeItem === item.toLowerCase()}\n            >\n              {item}\n            </MenuItem>\n          ))}\n        </InnerContainer>\n      </OuterContainer>\n    )\n  }\n}\n\nexport default NavBar\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Layout/Navbar/navbar.js","import React from 'react'\nimport styled from 'styled-components'\n\nimport NavbarContainer from './Navbar'\nimport { media } from '../../style/style-utils'\n\nconst OuterContainer = styled.div`\n  padding: 0 1.5%;\n  background-color: #e7eeed;\n  position: absolute;\n  min-height: 100%;\n  left: 12%;\n  right: 12%;\n\n  ${ media.tabletMax`\n    padding: 0;\n    left: 0;\n    right: 0;\n  ` }\n`\n\nconst Footer = styled.div`\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  padding: 5rem 0 3rem;\n  color: rgba(0, 0, 0, .4);\n  font-size: .75rem;\n  text-align: center;\n\n  ${ media.tabletMax`\n    padding: 1rem .75rem 3rem;\n  ` }\n`\n\nconst Link = styled.a`\n  color: inherit;\n`\n\nclass Layout extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.menuItems = [\n      'about',\n      'posts',\n      'projects',\n      'readings'\n    ]\n\n    this.title = 'dean slama'\n  }\n\n  render () {\n    const { location: { pathname } } = this.props\n\n    return (\n      <OuterContainer>\n        <NavbarContainer\n          currentPath={pathname}\n          title={this.title}\n          menuItems={this.menuItems}\n          {...this.props}\n        />\n        {this.props.children}\n        <Footer>\n          Feel free to <Link href='https://github.com/deanslamajr/deanslamajr.com' target='_blank'>fork this spa</Link> and host it!\n        </Footer>\n      </OuterContainer>\n    )\n  }\n}\n\nexport default Layout\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Layout/index.js","import React from 'react'\nimport styled from 'styled-components'\nimport axios from 'axios'\n\nimport { media } from '../../style/style-utils'\n\nconst SUCCESS = 'success'\nconst FAILURE = 'failure'\nconst LOGGEDOUT = 'logged out'\nconst AUTHENTICATED = 'authenticated'\nconst NOTAUTHENTICATED = 'not authenticated'\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  margin-top: 5.5rem;\n`\n\nconst CenteredBase = styled.div`\n  width: 20%;\n  margin: 0.75rem auto;\n\n  ${media.phoneMax`\n    width: 45%;\n    margin: 0.75rem auto;\n  `}\n`\n\nconst CenteredText = styled(CenteredBase)`\n  text-align: center;\n`\n\nconst AuthText = styled(CenteredText)`\n  height: 3em;\n`\n\nclass Login extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.state = {\n      username: '',\n      password: '',\n      loginResult: '',\n      authenticated: ''\n    }\n\n    this.handleSubmit = this.handleSubmit.bind(this)\n    this.checkAuthentication = this.checkAuthentication.bind(this)\n    this.logout = this.logout.bind(this)\n  }\n\n  handleChange (type, event) {\n    this.setState({ [type]: event.target.value })\n  }\n\n  handleSubmit (event) {\n    // prevent page refresh\n    event.preventDefault()\n\n    axios.post('/login', { username: this.state.username, password: this.state.password })\n      .then(res => {\n        this.setState({\n          loginResult: SUCCESS,\n          authenticated: AUTHENTICATED\n        })\n      })\n      .catch(() => {\n        // @todo log error\n        this.setState({ loginResult: FAILURE })\n      })\n  }\n\n  renderLoginResultDiv () {\n    return this.state.loginResult\n      ? (<CenteredText as='a' onClick={this.checkAuthentication}>{this.state.loginResult}!</CenteredText>)\n      : null\n  }\n\n  checkAuthentication () {\n    axios.get('/status/authentication')\n      .then(res => {\n        this.setState({ authenticated: AUTHENTICATED })\n      })\n      .catch(() => {\n        // @todo log error\n        this.setState({ authenticated: NOTAUTHENTICATED })\n      })\n  }\n\n  renderAuthenticationCheckDiv () {\n    const authState = this.state.authenticated\n    return (\n      <AuthText>\n        <div>{authState}</div>\n        {\n          authState === AUTHENTICATED\n            ? <button onClick={this.logout}>Logout</button>\n            : null\n        }\n      </AuthText>\n    )\n  }\n\n  logout () {\n    // revert login&auth state\n    this.setState({\n      loginResult: '',\n      authenticated: ''\n    })\n\n    axios.post('/logout')\n      .then(res => {\n        this.setState({ loginResult: LOGGEDOUT })\n      })\n      .catch(() => {\n        // @todo log error\n        this.setState({ loginResult: FAILURE })\n      })\n  }\n\n  componentDidMount () {\n    this.checkAuthentication()\n  }\n\n  render () {\n    return (\n      <Form onSubmit={this.handleSubmit}>\n        { this.renderAuthenticationCheckDiv() }\n        <CenteredBase\n          as='input'\n          type='text'\n          onChange={this.handleChange.bind(this, 'username')}\n          placeholder='username'\n        />\n        <CenteredBase\n          as='input'\n          type='password'\n          onChange={this.handleChange.bind(this, 'password')}\n          placeholder='password'\n        />\n        <CenteredBase\n          as='input'\n          type='submit'\n          value='Login'\n        />\n        { this.renderLoginResultDiv() }\n      </Form>\n    )\n  }\n}\n\nexport default Login\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Login/index.js","import React from 'react'\nimport {\n  CardLink,\n  ShadowCard,\n  Title,\n  Details,\n  Quote,\n  OuterContainer\n } from '../Card'\n\nimport { formatDate } from '../helpers'\n\nfunction Post ({ data }) {\n  const mediumUser = process.env.mediumUser\n  const postURL = `https://medium.com/${mediumUser}/${data.uniqueSlug}`\n\n  const date = new Date(data.firstPublishedAt)\n  const publishDate = formatDate(date)\n\n  return (\n    <OuterContainer>\n      <CardLink\n        href={postURL}\n        target='_blank'>\n        <ShadowCard>\n          <Title>\n            {data.title}\n          </Title>\n          <Details>\n            <div>\n              {publishDate}\n            </div>\n          </Details>\n          <Quote>\n            {data.previewContent.bodyModel.paragraphs[1].text}\n          </Quote>\n        </ShadowCard>\n      </CardLink>\n    </OuterContainer>\n  )\n}\n\nexport default Post\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Posts/Post.js","import React from 'react'\nimport Helmet from 'react-helmet'\n\nimport Header from '../Header'\nimport Loader from '../Loader'\nimport ErrorComponent from '../Error'\n\nimport Post from './Post'\n\nconst summary = 'This is a list of blog posts authored by the developer. Most recently published posts are nearer the top.'\n\nexport default class PostList extends React.Component {\n  componentDidMount () {\n    if (!this.props.data) {\n      this.props.fetchPosts()\n    }\n  }\n\n  render () {\n    const { data, isLoading, error } = this.props\n    let content\n\n    if (data && data.length) {\n      content = (\n        <div>\n          <Header summary={summary} />\n          {\n            data.map(postData => (\n              <Post key={postData.id} data={postData} />\n            ))\n          }\n        </div>\n      )\n    } else if (isLoading) {\n      content = (\n        <div>\n          <Header summary={summary} />\n          <Loader />\n        </div>\n      )\n    } else if (error) {\n      // @todo reroute to 5xx view\n      content = <ErrorComponent />\n    } else {\n      content = null\n    }\n\n    return (\n      <div>\n        <Helmet>\n          <title>dslama.net - posts</title>\n        </Helmet>\n        {content}\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Posts/PostList.js","import { connect } from 'react-redux'\n\nimport { fetchPosts } from '../../data/posts/actions'\nimport PostList from './PostList'\n\nfunction mapStateToProps (state) {\n  if (state.posts.isLoading) {\n    return {\n      isLoading: true\n    }\n  } else if (state.posts.error) {\n    // @todo log error\n    return {\n      error: true\n    }\n  } else if (state.posts.isFetched) {\n    return {\n      data: state.posts.data\n    }\n  } else {\n    return {}\n  }\n}\n\nexport default connect(mapStateToProps, { fetchPosts })(PostList)\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Posts/index.js","import React from 'react'\nimport styled from 'styled-components'\n\nimport {\n  ShadowCard,\n  Title,\n  Quote,\n  OuterContainer\n } from '../Card'\n\nconst ProjectLink = styled.a`\n  text-decoration: none;\n  padding-right: .5rem;\n  color: inherit;\n`\n\nconst SourceLink = styled.a`\n  text-decoration: none;\n  font-size: 1rem;\n  padding-left: .5rem;\n  color: #b21a27;\n`\n\nconst Description = styled.div`\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  font-size: 1.1rem;\n  margin: 1rem 0;\n`\n\nfunction Project ({ cardData }) {\n  return (\n    <OuterContainer key={cardData.id}>\n      <ShadowCard>\n        <Title>\n          <ProjectLink href={cardData.url} target='_blank' styleName='project-link'>{cardData.name}</ProjectLink>\n           -\n          <SourceLink href={cardData.source} target='_blank' styleName='source-link'>source</SourceLink>\n        </Title>\n        <Description>\n          {cardData.description}\n        </Description>\n        <Quote dangerouslySetInnerHTML={{ __html: cardData.summary }} />\n      </ShadowCard>\n    </OuterContainer>\n  )\n}\n\nexport default Project\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Projects/Project.js","import { connect } from 'react-redux'\n\nimport { fetchProjects } from '../../data/projects/actions'\nimport ProjectsList from './ProjectsList'\n\nfunction mapStateToProps (state) {\n  if (state.projects.isLoading) {\n    return {\n      isLoading: true\n    }\n  } else if (state.projects.error) {\n    // @todo log error\n    return {\n      error: true\n    }\n  } else if (state.projects.isFetched) {\n    return {\n      projects: state.projects.data\n    }\n  } else {\n    return {}\n  }\n}\n\nexport default connect(mapStateToProps, { fetchProjects })(ProjectsList)\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Projects/ProjectsContainer.js","import React from 'react'\nimport Helmet from 'react-helmet'\n\nimport Header from '../Header'\nimport Loader from '../Loader'\nimport ErrorComponent from '../Error'\n\nimport Project from './Project'\n\nconst summary = 'This is a list of software authored by the developer. Clicking on the title of an item will open a new tab/window navigated to a publicly hosted version of the software. Each project`s source code is available via the `source` link.'\n\nexport default class ProjectsList extends React.Component {\n  componentDidMount () {\n    if (!this.props.projects) {\n      this.props.fetchProjects()\n    }\n  }\n\n  render () {\n    const { projects, isLoading, error } = this.props\n    let content\n\n    if (projects) {\n      const sortedData = projects.sort((a, b) => b.order - a.order)\n\n      content = (\n        <div>\n          <Header summary={summary} />\n          {\n            sortedData.map(projectsData => (\n              <Project key={projectsData.id} cardData={projectsData} />\n            ))\n          }\n        </div>\n      )\n    } else if (isLoading) {\n      content = (\n        <div>\n          <Header summary={summary} />\n          <Loader />\n        </div>\n      )\n    } else if (error) {\n      // @todo reroute to 5xx view\n      content = <ErrorComponent />\n    } else {\n      content = null\n    }\n\n    return (\n      <div>\n        <Helmet>\n          <title>dslama.net - projects</title>\n        </Helmet>\n        {content}\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Projects/ProjectsList.js","import React from 'react'\n\nimport ProjectsContainer from './ProjectsContainer'\n\nexport default class ProjectsParentContainer extends React.Component {\n  render () {\n    const { children: editProjectsComponent } = this.props\n\n    return editProjectsComponent || <ProjectsContainer />\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Projects/index.js","import React from 'react'\nimport styled from 'styled-components'\n\nimport { media } from '../../../style/style-utils'\n\nconst Form = styled.form`\n  display: flex;\n  flex-direction: column;\n  margin-top: 1.5rem;\n`\n\nconst Input = styled.input`\n  width: 45%;\n  margin: 0.75rem auto;\n\n  ${media.phoneMax`\n    width: 85%;\n    margin: 0.5rem auto;\n  `}\n\n  height: ${props => props.placeholder === 'title' || props.placeholder === 'url' ? '5em' : ''};\n  height: ${props => props.placeholder === 'quote' ? '30em' : ''};\n`\n\nconst ServerResponse = styled.div`\n  width: 25%;\n  height: 1em;\n  margin: .25rem auto;\n  color: ${props => props.error ? 'red' : 'green'};\n\n  ${media.phoneMax`\n    width: 65%;\n    height: 2em;\n  `}\n`\n\nclass Add extends React.Component {\n  render () {\n    const {\n      serverResult,\n      submitHandler,\n      changeHandler,\n      author,\n      title,\n      quote,\n      publishDate,\n      publication,\n      url } = this.props\n\n    return (\n      <Form onSubmit={submitHandler}>\n        <Input\n          value={author}\n          type='text'\n          onChange={(e) => changeHandler('author', e)}\n          placeholder='author'\n        />\n        <Input\n          as='textarea'\n          value={title}\n          onChange={(e) => changeHandler('title', e)}\n          placeholder='title'\n        />\n        <Input\n          as='textarea'\n          value={quote}\n          onChange={(e) => changeHandler('quote', e)}\n          placeholder='quote'\n        />\n        <Input\n          value={publishDate}\n          type='text'\n          onChange={(e) => changeHandler('publishDate', e)}\n          placeholder='publishDate'\n        />\n        <Input\n          value={publication}\n          type='text'\n          onChange={(e) => changeHandler('publication', e)}\n          placeholder='publication'\n        />\n        <Input\n          as='textarea'\n          value={url}\n          onChange={(e) => changeHandler('url', e)}\n          placeholder='url'\n        />\n        <ServerResponse error={serverResult.error}>{serverResult.message}</ServerResponse>\n        <Input type='submit' value='Add Reading' />\n      </Form>\n    )\n  }\n}\n\nexport default Add\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Readings/Add/Add.js","import React from 'react'\nimport axios from 'axios'\n\nimport Add from './Add'\n\nexport default class AddContainer extends React.Component {\n  constructor (props) {\n    super(props)\n\n    this.defaultServerState = {\n      serverResult: {\n        message: '',\n        error: null\n      }\n    }\n\n    this.defaultFormState = {\n      author: '',\n      title: '',\n      quote: '',\n      publishDate: '',\n      publication: '',\n      url: ''\n    }\n\n    this.defaultState = Object.assign({}, this.defaultFormState, this.defaultServerState)\n    this.state = this.defaultState\n\n    this._onSubmit = this._onSubmit.bind(this)\n    this._onChange = this._onChange.bind(this)\n  }\n\n  _onSubmit (event) {\n    // prevent page refresh\n    event.preventDefault()\n\n    try {\n      // data validations\n      //\n      // 1) No empty inputs\n      Object.keys(this.state).forEach(key => {\n        if (!this.state[key]) {\n          throw new Error(`Invalid Submission: '${key}' cannot be falsy`)\n        }\n      })\n      // 2) publish date must be in a correct format\n      const publishDate = new Date(this.state.publishDate).valueOf()\n      if (!publishDate) {\n        throw new Error('Invalid date!')\n      }\n\n      // data to push to dynamoDB\n      const readingData = {\n        author: this.state.author,\n        title: this.state.title,\n        quote: this.state.quote,\n        publishDate: publishDate,\n        publication: this.state.publication,\n        url: this.state.url\n      }\n\n      // push data to dynamoDB\n      axios.post('/api/readings', readingData)\n        .then(res => {\n          this.setState({ serverResult: {\n            message: 'Success!',\n            error: null\n          }})\n          // clear form values\n          this.setState(this.defaultFormState)\n        })\n        .catch(err => {\n          throw err\n        })\n    } catch (error) {\n      this.setState({ serverResult: {\n        message: error.message,\n        error\n      }\n      })\n    }\n  }\n\n  _onChange (element, event) {\n    this.setState({ [element]: event.target.value })\n  }\n\n  render () {\n    return (\n      <Add\n        serverResult={this.state.serverResult}\n        submitHandler={this._onSubmit}\n        changeHandler={this._onChange}\n        author={this.state.author}\n        title={this.state.title}\n        quote={this.state.quote}\n        publishDate={this.state.publishDate}\n        publication={this.state.publication}\n        url={this.state.url}\n        />\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Readings/Add/index.js","import React from 'react'\n\nimport {\n  CardLink,\n  ShadowCard,\n  Title,\n  Details,\n  Quote,\n  OuterContainer\n } from '../Card'\n\nimport { formatDate } from '../helpers'\n\nfunction Reading ({ cardData }) {\n  const date = new Date(cardData.publishDate)\n  const publishDate = formatDate(date)\n\n  return (\n    <OuterContainer>\n      <CardLink\n        href={cardData.url}\n        target='_blank'>\n        <ShadowCard>\n          <Title>\n            {cardData.title}\n          </Title>\n          <Details>\n            <div>\n              {`${cardData.author} @ ${cardData.publication}`}\n            </div>\n            <div>\n              {publishDate}\n            </div>\n          </Details>\n          <Quote dangerouslySetInnerHTML={{ __html: cardData.quote }} />\n        </ShadowCard>\n      </CardLink>\n    </OuterContainer>\n  )\n}\n\nexport default Reading\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Readings/Reading.js","import { connect } from 'react-redux'\n\nimport { fetchReadings } from '../../data/readings/actions'\nimport ReadingsList from './ReadingsList'\n\nconst mapStateToProps = state => {\n  if (state.readings.isLoading) {\n    return {\n      isLoading: state.readings.isLoading\n    }\n  } else if (state.readings.error) {\n    // @todo log error\n    return {\n      error: true\n    }\n  } else if (state.readings.isFetched) {\n    return {\n      readings: state.readings.data\n    }\n  } else {\n    return {}\n  }\n}\n\nexport default connect(mapStateToProps, { fetchReadings })(ReadingsList)\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Readings/ReadingsContainer.js","import React from 'react'\nimport Helmet from 'react-helmet'\n\nimport Header from '../Header'\nimport Loader from '../Loader'\nimport ErrorComponent from '../Error'\n\nimport Reading from './Reading'\n\nconst summary = 'This is a list of interesting and informative blog posts from others in the international web development community. Most recently discovered posts are nearer the top.'\n\nexport default class Readings extends React.Component {\n  componentDidMount () {\n    if (!this.props.readings) {\n      this.props.fetchReadings()\n    }\n  }\n\n  render () {\n    const { readings, isLoading, error } = this.props\n    let content\n\n    if (readings) {\n      const sortedData = readings.sort((a, b) => b.foundDate - a.foundDate)\n\n      content = (\n        <div>\n          <Header summary={summary} />\n          {\n            sortedData.map(readingData => (\n              <Reading key={readingData.id} cardData={readingData} />\n            ))\n          }\n        </div>\n      )\n    } else if (isLoading) {\n      content = (\n        <div>\n          <Header summary={summary} />\n          <Loader />\n        </div>\n      )\n    } else if (error) {\n      // @todo reroute to 5xx view\n      content = <ErrorComponent />\n    } else {\n      content = null\n    }\n\n    return (\n      <div>\n        <Helmet>\n          <title>dslama.net - readings</title>\n        </Helmet>\n        {content}\n      </div>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Readings/ReadingsList.js","import React from 'react'\n\nimport ReadingsContainer from './ReadingsContainer'\n\nexport default class ReadingsParentContainer extends React.Component {\n  render () {\n    const { children: addReadingsComponent } = this.props\n\n    return addReadingsComponent || <ReadingsContainer />\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/Readings/index.js","import React from 'react'\nimport { Route, Switch } from 'react-router'\n\n// Components\nimport Layout from './Layout'\n\nimport About from './About'\nimport EditAbout from './About/Edit'\n\nimport Posts from './Posts'\n\nimport Projects from './Projects'\n\nimport Readings from './Readings'\nimport AddReading from './Readings/Add'\n\nimport Login from './Login'\n\nconst Routes = () => (\n  <Switch>\n    <Route exact path='/about' render={props => (\n      <Layout {...props}>\n        <About />\n      </Layout>\n    )} />\n    <Route path='/about/edit' render={props => (\n      <Layout {...props}>\n        <EditAbout/>\n      </Layout>\n    )} />\n    <Route path='/posts' render={props => (\n      <Layout {...props}>\n        <Posts/>\n      </Layout>\n    )} />\n    <Route path='/projects' render={props => (\n      <Layout {...props}>\n        <Projects/>\n      </Layout>\n    )} />\n    <Route exact path='/readings' render={props => (\n      <Layout {...props}>\n        <Readings/>\n      </Layout>\n    )} />\n    <Route path='/readings/add' render={props => (\n      <Layout {...props}>\n        <AddReading/>\n      </Layout>\n    )} />\n    <Route path='/babylou' render={props => (\n      <Layout {...props}>\n        <Login/>\n      </Layout>\n    )} />\n    <Route render={props => (\n      <Layout {...props}>\n        <About/>\n      </Layout>\n    )} />\n  </Switch>\n)\n\nexport default Routes\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/components/routes.js","import {\n  ABOUT_ADD,\n  ABOUT_FETCH_PENDING,\n  ABOUT_FETCH_FULFILLED,\n  ABOUT_FETCH_REJECTED } from './constants'\n\nconst reducers = {\n  [ABOUT_ADD]: (state, payload) => ({\n    ...state,\n    data: payload,\n    isFetched: true\n  }),\n  [ABOUT_FETCH_PENDING]: (state, payload) => ({\n    ...state,\n    isLoading: true\n  }),\n  [ABOUT_FETCH_FULFILLED]: (state, payload) => ({\n    ...state,\n    data: payload.data,\n    isLoading: false,\n    isFetched: true\n  }),\n  [ABOUT_FETCH_REJECTED]: (state, payload) => ({\n    ...state,\n    error: payload.response.data,\n    isLoading: false\n  })\n}\n\nexport default (state = {}, { type, payload }) => {\n  const actionReducer = reducers[type]\n  return typeof actionReducer === 'function' ? actionReducer(state, payload) : state\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/about/reducers.js","import {\n  POSTS_FETCH_PENDING,\n  POSTS_FETCH_FULFILLED,\n  POSTS_FETCH_REJECTED,\n  POSTS_ADD } from './constants'\n\nconst reducers = {\n  [POSTS_ADD]: (state, payload) => ({\n    ...state,\n    data: payload,\n    isFetched: true\n  }),\n  [POSTS_FETCH_PENDING]: (state, payload) => ({\n    ...state,\n    isLoading: true\n  }),\n  [POSTS_FETCH_FULFILLED]: (state, payload) => ({\n    ...state,\n    data: payload.data,\n    isLoading: false,\n    isFetched: true\n  }),\n  [POSTS_FETCH_REJECTED]: (state, payload) => ({\n    ...state,\n    error: payload.response.data,\n    isLoading: false\n  })\n}\n\nexport default (state = {}, { type, payload }) => {\n  const actionReducer = reducers[type]\n  return typeof actionReducer === 'function' ? actionReducer(state, payload) : state\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/posts/reducers.js","import {\n  PROJECTS_FETCH_PENDING,\n  PROJECTS_FETCH_FULFILLED,\n  PROJECTS_FETCH_REJECTED,\n  PROJECTS_ADD } from './constants'\n\nconst reducers = {\n  [PROJECTS_ADD]: (state, payload) => ({\n    ...state,\n    data: payload,\n    isFetched: true\n  }),\n  [PROJECTS_FETCH_PENDING]: (state, payload) => ({\n    ...state,\n    isLoading: true\n  }),\n  [PROJECTS_FETCH_FULFILLED]: (state, payload) => ({\n    ...state,\n    data: payload.data,\n    isLoading: false,\n    isFetched: true\n  }),\n  [PROJECTS_FETCH_REJECTED]: (state, payload) => ({\n    ...state,\n    error: payload.response.data,\n    isLoading: false\n  })\n}\n\nexport default (state = {}, { type, payload }) => {\n  const actionReducer = reducers[type]\n  return typeof actionReducer === 'function' ? actionReducer(state, payload) : state\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/projects/reducers.js","import {\n  READINGS_ADD,\n  READINGS_FETCH_PENDING,\n  READINGS_FETCH_FULFILLED,\n  READINGS_FETCH_REJECTED } from './constants'\n\nconst reducers = {\n  [READINGS_ADD]: (state, payload) => ({\n    ...state,\n    data: payload,\n    isFetched: true\n  }),\n  [READINGS_FETCH_PENDING]: (state, payload) => ({\n    ...state,\n    isLoading: true\n  }),\n  [READINGS_FETCH_FULFILLED]: (state, payload) => ({\n    ...state,\n    data: payload.data,\n    isLoading: false,\n    isFetched: true\n  }),\n  [READINGS_FETCH_REJECTED]: (state, payload) => ({\n    ...state,\n    error: payload.response.data,\n    isLoading: false\n  })\n}\n\nexport default (state = {}, { type, payload }) => {\n  const actionReducer = reducers[type]\n  return typeof actionReducer === 'function' ? actionReducer(state, payload) : state\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/readings/reducers.js","import { combineReducers } from 'redux'\n\nimport readings from './readings/reducers'\nimport about from './about/reducers'\nimport posts from './posts/reducers'\nimport projects from './projects/reducers'\n\nexport default combineReducers({\n  readings,\n  about,\n  posts,\n  projects\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/reducers.js","import { createStore, applyMiddleware } from 'redux'\nimport promiseMiddleware from 'redux-promise-middleware'\n\nimport root from './reducers'\n\nexport default (initialState = {}) => {\n  return createStore(\n    root,\n    initialState,\n    applyMiddleware(promiseMiddleware())\n  )\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/client/data/store.js","import express from 'express'\n\nimport { get as getProjects } from './controllers/projects'\nimport { get as getPosts } from './controllers/posts'\nimport { get as getAbout } from './controllers/about'\nimport {\n  get as getReadings,\n  add as addReading } from './controllers/readings'\n\nconst router = express.Router()\n\nrouter.get('/projects', getProjects)\nrouter.get('/posts', getPosts)\nrouter.get('/about', getAbout)\n\nrouter.get('/readings', getReadings)\nrouter.post('/readings', addReading)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/api.js","import { get as getAbout } from '../models/about'\n\nexport function get (req, res) {\n  return getAbout()\n    .then(data => {\n      res.status(200)\n      res.json(data)\n    })\n    .catch(() => {\n      // @todo log error\n      res.sendStatus(500)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/about.js","import bcrypt from 'bcrypt'\nimport jwt from 'jsonwebtoken'\n\nimport { getHashedPassword as getUsersHashedPassword } from '../models/user'\nimport { increment, time } from '../helpers/metrics'\nimport constants from '../../../config/constants'\n\nconst ACCESSTOKENCOOKIE = constants.get('accessTokenCookie')\nconst SECRET = constants.get('secret')\nconst INVALID_CREDS = 'INVALID_CREDS'\n\nfunction verifyPassword (req, response) {\n  // username does not exist in DB\n  if (!response) {\n    return Promise.reject(new Error(INVALID_CREDS))\n  }\n\n  return new Promise((resolve, reject) => {\n    bcrypt.compare(req.body.password, response, (error, result) => {\n      if (error) {\n        reject(error)\n      }\n      resolve(result)\n    })\n  })\n}\n\nfunction createJWT (res, result) {\n  // incorrect password\n  if (result !== true) {\n    res.sendStatus(418)\n    return\n  }\n\n  // create JWT\n  const accessToken = jwt.sign({\n    // 3 hours\n    exp: Math.floor(Date.now() / 1000) + (60 * 60 * 3)\n  }, SECRET)\n\n  // set cookie to JWT\n  res.cookie(ACCESSTOKENCOOKIE, accessToken,\n    {\n      // 3 hours\n      expires: new Date(Date.now() + 1000 * 60 * 60 * 3),\n      httpOnly: true\n    })\n\n  // send OK response\n  res.sendStatus(200)\n}\n\nexport function authenticateUser (req, res) {\n  const startTime = Date.now()\n\n  return getUsersHashedPassword(req.body.username)\n    .then(verifyPassword.bind(null, req))\n    .then(createJWT.bind(null, res))\n    .then(() => {\n      increment('login.success')\n      time('login.suc', Date.now() - startTime)\n    })\n    .catch(error => {\n      const responseCode = error && error.message === INVALID_CREDS\n        ? 418\n        : 500\n\n      res.sendStatus(responseCode)\n      increment('login.failure')\n      time('login.fail', Date.now() - startTime)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/login.js","import constants from '../../../config/constants'\n\nconst ACCESSTOKENCOOKIE = constants.get('accessTokenCookie')\n\nexport function logout (req, res) {\n  res.clearCookie(ACCESSTOKENCOOKIE, {})\n  res.sendStatus(200)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/logout.js","import { get as getPosts } from '../models/posts'\n\nexport function get (req, res) {\n  return getPosts()\n    .then(data => {\n      res.status(200)\n      res.json(data)\n    })\n    .catch(() => {\n      // @todo log error\n      res.sendStatus(500)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/posts.js","import { get as getProjects } from '../models/projects'\n\nexport function get (req, res) {\n  return getProjects()\n    .then(projects => {\n      res.status(200)\n      res.json(projects)\n    })\n    .catch(() => {\n      // @todo log error\n      res.sendStatus(500)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/projects.js","import uuid from 'uuid/v4'\n\nimport {\n  get as getReadings,\n  add as addReading } from '../models/readings'\n\nimport Raven from '../helpers/sentry'\n\nfunction get (req, res) {\n  return getReadings()\n    .then(readings => {\n      res.status(200)\n      res.json(readings)\n    })\n    .catch(e => {\n      // res.sendStatus(500)\n      res.status(500).json(e)\n      // @todo log error\n      Raven.captureException(e)\n    })\n}\n\nfunction add (req, res) {\n  // @todo validate against empty strings (on frontend too!)\n  const readingData = {\n    author: req.body.author,\n    foundDate: (new Date()).getTime(),\n    publishDate: req.body.publishDate,\n    publication: req.body.publication,\n    quote: req.body.quote,\n    title: req.body.title,\n    url: req.body.url,\n    id: uuid()\n  }\n\n  return addReading(readingData)\n    .then(() => {\n      res.sendStatus(200)\n    })\n    .catch(() => {\n      res.sendStatus(500)\n    })\n}\n\nexport {\n  get,\n  add\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/readings.js","import React from 'react'\nimport { renderToString } from 'react-dom/server'\nimport { StaticRouter, RouterContext } from 'react-router'\nimport { Provider } from 'react-redux'\nimport { ServerStyleSheet } from 'styled-components'\n\nimport createStore from '../../client/data/store'\n\nimport { addReadings } from '../../client/data/readings/actions'\nimport { addAbout } from '../../client/data/about/actions'\nimport { addPosts } from '../../client/data/posts/actions'\nimport { addProjects } from '../../client/data/projects/actions'\n\nimport Routes from '../../client/components/routes'\nimport { verify as verifyJWT } from '../models/jwt'\n\nimport { get as getPosts } from '../models/posts'\nimport { get as getReadings } from '../models/readings'\nimport { get as getAbout } from '../models/about'\nimport { get as getProjects } from '../models/projects'\n\nfunction fetchDataByPath (req) {\n  return new Promise((resolve, reject) => {\n    const store = createStore()\n\n    switch (req.originalUrl) {\n      case '/':\n      case '/about':\n        getAbout()\n          .then(data => {\n            store.dispatch(addAbout(data))\n            resolve({ store })\n          })\n          .catch(() => {\n            // @todo log error\n            resolve()\n          })\n        break\n      case '/projects':\n        getProjects()\n          .then(data => {\n            store.dispatch(addProjects(data))\n            resolve({ store })\n          })\n          .catch(() => {\n            // @todo log error\n            resolve()\n          })\n        break\n      case '/posts':\n        getPosts()\n          .then(data => {\n            store.dispatch(addPosts(data))\n            resolve({ store })\n          })\n          .catch(() => {\n            // @todo log error\n            resolve()\n          })\n        break\n      case '/readings':\n        getReadings()\n          .then(data => {\n            store.dispatch(addReadings(data))\n            resolve({ store })\n          })\n          .catch(() => {\n            // @todo log error\n            resolve()\n          })\n        break\n      case '/readings/add':\n        verifyJWT(req)\n          .then(() => {\n            resolve()\n          })\n          .catch(() => {\n            // @todo log warning\n            resolve({ redirect: { pathname: '/', search: '' } })\n          })\n        break\n      default:\n        resolve()\n    }\n  })\n}\n\n/**\n  * Perform server-side async data fetching in this function (according to path)\n  **/\nfunction matchRoutes (req) {\n  return new Promise((resolve) => {\n    fetchDataByPath(req)\n      .then(result => {\n        let store\n        let redirect\n\n        if (result) {\n          redirect = result.redirect\n          store = result.store\n        }\n\n        resolve({ redirect, store })\n      })\n  })\n}\n\nfunction renderComponent (req, res) {\n  matchRoutes(req)\n    .then(({ redirect, store }) => {\n      if (redirect) {\n        res.redirect(302, redirect.pathname + redirect.search)\n      } else {\n        const context = {};\n  \n        store = store || createStore()\n        const initialState = JSON.stringify(store.getState())\n\n        const sheet = new ServerStyleSheet()\n        \n        const markup = renderToString(\n          sheet.collectStyles(\n            <Provider store={store} key='provider'>\n              <StaticRouter location={req.url} context={context}>\n                <Routes />\n              </StaticRouter>\n            </Provider>\n          )\n        );\n\n        const styleTags = sheet.getStyleTags()\n\n        res\n          .status(200)\n          .render('index', { markup, styleTags, initialState })\n        }\n    })\n    .catch(err => {\n      // @todo log error\n      console.error(err)\n      res\n        .status(500)\n        .send('500: System Error')\n    })\n}\n\nexport default renderComponent\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/render-component.js","import { verify as verifyJWT } from '../models/jwt'\n\nexport function isAuthenticated (req, res) {\n  return verifyJWT(req)\n    .then(() => {\n      res.sendStatus(200)\n    })\n    .catch(() => {\n      // @todo log error\n      res.sendStatus(418)\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/controllers/status.js","/**\n * @overview Metrics configuration\n * @requires lynx\n *\n * @todo only send metrics if `METRICS_HOST` and other required env vars are set, otherwise leave as placeholder functions\n */\n\nimport Lynx from 'lynx'\n\nimport constants from '../../../config/constants'\n\nconst settings = {\n  host: constants.get('METRICS_HOST'),\n  port: constants.get('METRICS_PORT')\n}\n\nconst client = new Lynx(settings.host, settings.port)\n\nconst prefix = constants.get('METRICS_PREFIX') || 'dslamanet'\n\nfunction sanitizeName (name) {\n  const tokens = name.split('/')\n\n  // prevent a leading '_'\n  tokens.shift()\n  return tokens.join('_')\n}\n\nfunction createRequestNamespace (req) {\n  const method = req.method || 'unknown_method'\n  const urlTokens = req.originalUrl.split('?')\n  const resourceName = urlTokens[0].replace('.', '_')\n  const sanitizedResourceName = sanitizeName(resourceName)\n  return ['requests', method.toLowerCase(), sanitizedResourceName].join('.')\n}\n\nfunction increment (data) {\n  client.increment(`${prefix}.${data}`)\n}\n\nfunction time (data, duration) {\n  client.timing(`${prefix}.${data}`, duration)\n}\n\nfunction sendTimeMetric (startTime, namespace, result) {\n  const duration = new Date().getTime() - startTime\n  time(`${namespace}.${result}`, duration)\n}\n\n/**\n * Function called on response finish that sends stats to statsd\n **/\nfunction sendFinishedRequest (req, res, startTime) {\n  // we don't want to metric EB health queries\n  if (req.path.includes('health')) {\n    return\n  }\n\n  const namespace = createRequestNamespace(req)\n\n  // Send metric: Status Code\n  const statusCode = res.statusCode || 'unknown_status'\n  increment(`${namespace}.status_code.${statusCode}`)\n\n  // Send metric: Response Time\n  const duration = new Date().getTime() - startTime\n  time(`${namespace}.response_time`, duration)\n}\n\n/**\n * Function called on request close (client initiated) that sends stats to statsd\n **/\nfunction sendRequestClosed (req, startTime) {\n  // we don't want to metric EB health queries\n  if (req.path.includes('health')) {\n    return\n  }\n\n  const namespace = createRequestNamespace(req)\n\n  // Send metric: Status Code\n  increment(`${namespace}.status_code.client_closed_connection`)\n\n  // Send metric: Response Time\n  const duration = new Date().getTime() - startTime\n  time(`${namespace}.response_time`, duration)\n}\n\nfunction middleware (req, res, next) {\n  const startTime = new Date().getTime()\n\n  // Add response listeners\n  //\n  // Server finishes sending a response\n  res.once('finish', sendFinishedRequest.bind(null, req, res, startTime))\n  // Client initiated the end of the request\n  req.once('close', sendRequestClosed.bind(null, req, startTime))\n\n  if (next) {\n    next()\n  }\n}\n\nmodule.exports = {\n  middleware,\n  increment,\n  sendTimeMetric,\n  client\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/helpers/metrics.js","import Raven from 'raven'\n\nimport constants from '../../../config/constants'\n\n// @todo only for production builds\nRaven.config(constants.get('SENTRY_DNS')).install()\n\nexport default Raven\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/helpers/sentry.js","import db from './db'\n\nimport constants from '../../../config/constants'\n\nexport const getHashedPassword = (username) => {\n  return db\n    .table(constants.get('DB_TABLE_USERS'))\n    .where('name').eq(username)\n    .get()\n    .then(res => {\n      return res && res.password\n        ? res.password\n        : null\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/models/user.js","import express from 'express'\n\nimport api from './api'\n\nimport { logout } from './controllers/logout'\nimport { isAuthenticated } from './controllers/status'\nimport { authenticateUser } from './controllers/login'\nimport renderComponent from './controllers/render-component'\n\nconst router = express.Router()\n\nrouter.use('/api', api)\n\nrouter.post('/login', authenticateUser)\nrouter.post('/logout', logout)\nrouter.get('/status/authentication', isAuthenticated)\n\nrouter.get('*', renderComponent)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/server/routes.js","module.exports = require(\"aws-dynamodb\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-dynamodb\"\n// module id = 75\n// module chunks = 0","module.exports = require(\"bcrypt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt\"\n// module id = 76\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 77\n// module chunks = 0","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 78\n// module chunks = 0","module.exports = require(\"helmet\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"helmet\"\n// module id = 79\n// module chunks = 0","module.exports = require(\"lynx\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"lynx\"\n// module id = 80\n// module chunks = 0","module.exports = require(\"nconf\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nconf\"\n// module id = 81\n// module chunks = 0","module.exports = require(\"raven\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"raven\"\n// module id = 82\n// module chunks = 0","module.exports = require(\"react-dom/server\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-dom/server\"\n// module id = 83\n// module chunks = 0","module.exports = require(\"redux-promise-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"redux-promise-middleware\"\n// module id = 84\n// module chunks = 0","module.exports = require(\"uuid/v4\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid/v4\"\n// module id = 85\n// module chunks = 0"],"sourceRoot":""}